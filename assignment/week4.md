# Fourth Study Week

- 30강: [계층](#30-계층)

- 31강: [집합](#31-집합)

- 32강: [결합집합](#32-결합집합)

- 33강: [계산된 필드](#33-계산된-필드)

- 34강: [행수준계산](#34-행수준계산)

- 35강: [집계계산](#35-집계계산)

- 36강: [테이블계산](#36-테이블계산)

- 37강: [퀵테이블계산(1)](#37-퀵테이블계산1)

- 38강: [퀵테이블계산(2)](#38-퀵테이블계산2)

- [문제1](#문제-1)

- [문제2](#문제-2)

- [문제3](#문제-3)

## Study Schedule

| 강의 범위     | 강의 이수 여부 | 링크                                                                                                        |
|--------------|---------|-----------------------------------------------------------------------------------------------------------|
| 1~9강        |  ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=84)       |
| 10~19강      | ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=75)       |
| 20~29강      | ✅      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=65)       |
| 30~38강      | ✅      | [링크](https://youtu.be/e6J0Ljd6h44?si=nhGbB7GsdOCqj15f)       |
| 39~49강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=45)       |
| 50~59강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=35)       |
| 60~69강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=25)       |
| 70~79강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=15)       |
| 80~89강      | 🍽️      | [링크](https://www.youtube.com/watch?v=AXkaUrJs-Ko&list=PL87tgIIryGsa5vdz6MsaOEF8PK-YqK3fz&index=5)        |

<!-- 여기까진 그대로 둬 주세요-->

> **🧞‍♀️ 오늘의 스터디는 지니와 함께합니다.**


## 30. 계층

<!-- 계층 구조와 관련된 개념, 사용 방법 등을 적어주세요. -->

`계층`: 뷰에서 데이터를 **drill down**해 값을 세부적으로 찾을 때 유용한 방법   
`Drill down`이란?: 필드의 좌측 +를 클릭하여 하위 계층의 필드를 추가적으로 생성

```
태블로에서 날짜 데이터는 자동으로 계층을 생성함(년, 분기, 월, 일)
```
```
# 계층 생성하기
두 필드 선택한 후 마우스 우 클릭->계층->계층 만들기->계층의 이름 설정->나머지 필드를 계층으로 드래그->원하는 위치로 드래그 하여 계층 순서 지정
```

## 31. 집합

<!-- 집합의 정의 및 활용 방법에 대해 알게 된 점을 적어주세요. -->

`집합`   
: 사용자가 직접 어떤 조건을 설정하고 그 조건을 기반으로 데이터를 구분하는 방법

**ex)** 수익을 많이 낸 상위10개의 시/도 표현하기   
시/도 필드 우클릭->만들기->집합->”일반”, ”조건”, ”상위”

```
#일반: 그룹 기능과 유사, 수동으로 데이터를 선택하여 묶을 수 있음.

#조건: 사용자가 설정한 조건이 충족되면 데이터들을 묶어 줌.

#상위: 필드 기준으로 상위 또는 하위 순서로 데이터를 묶어 줌.
“상위” 탭에서 수익 상위 10개로 지정하여 생성된 집합 필드를 마크 창의 색상으로 drug&drop하면, 상위 시/도 10개만 색깔을 달리 표현할 수 있음.
```


## 32. 결합집합

<!-- 결합집합의 개념 및 사용 사례를 적어주세요. -->

기본적으로 집합을 만들 때에는 하나의 조건을 설정할 수 있음.   
만약 두 가지의 조건을 조건하고 싶다면 **결합된 집합**을 사용하면 됨!

**ex)** 매출이 5만원 이상이고, 수익률이 10% 이상인 도시의 데이터를 구분해보기
```
첫 번째 집합 만들기: 매출 5만원 이상
두 번째 집합 만들기: 수익률 10% 이상

둘 중 하나의 집합 필드 우클릭->결합된 집합 만들기->두개의 집합 선택->원하는 집합 형태 선택
원하는 집합 형태를 바꾸고 싶다면, 집합 편집을 통해 변경할 수 있음.
```


## 33. 계산된 필드

<!-- 계산된 필드를 사용하는 방법과 예시를 적어주세요. -->

`계산된 필드`: 데이터 원본에 있는 필드를 활용하여 새로운 필드를 만드는 기능

```
# 계산된 필드 만들기
방법1. 데이터 패널을 통해 생성
방법2. 분석 탭을 활용하여 생성
방법3. 사용하고자 하는 필드 위에 마우스 우클릭 하여 만드는 방법
```
```
# 해당 칸에서 필드 입력하기
방법1. 해당 필드를 drug&drop
방법2. 입력 창에 필드 이름을 입력하면 관련 필드가 나열되어 선택하는 방법
주석 작성하기: // 입력 후 작성하면 됨.
```

**ex)** 수익률 필드 만들기   
계산된 필드 만들기->이름: 수익률(%)로 지정->SUM([수익]) / SUM([매출]) ->생성된 필드 우클릭->기본 속성->숫자 형식->백분율


## 34. 행수준계산

<!-- 행수준 계산의 의미와 적용 방법을 적어주세요. -->

**계산된 필드**의 `종류`: 기본 계산, 테이블 계산, LOD 표현식

`기본계산`: 데이터 원본에 대한 **행 수준 계산** 또는 **집계 계산**
```
#행 수준 계산: 데이터의 각 레코드를 통해 계산하는 방식: [수익]/[매출]
#집계 계산: 현재 뷰에서 보이는 기준으로 계산하는 방식: SUM([수익]) / SUM([매출])
```
**<행 수준 계산 실습하기>**   
**ex1)** ‘고객이름’에서 성(2)을 이름(1)과 분리하기

<img width="383" alt="행기준 이름 분리" src="https://github.com/user-attachments/assets/8c23dec7-8830-47b6-ad93-10586f5a7f15">

**ex2)** 수익성이 있는 제품 확인하기

<img width="380" alt="행기준 수익성" src="https://github.com/user-attachments/assets/a99d3c51-8853-4d1b-8d90-a06a48bfe2e5">

**ex3)** 두 날짜 사이의 일수 계산하기

<img width="380" alt="행기준 날짜 차이" src="https://github.com/user-attachments/assets/8840c9c1-53b5-4d2e-9863-880dca15bd1c">

측정값으로 계산된 것은 주문id가 같다면 합계로 계산하기 때문에, 차원으로 변경하여 사용해야 함.


## 35. 집계계산

<!-- 집계계산의 정의 및 활용 사례에 대해 알게 된 점을 적어주세요. -->

태블로는 뷰에서 필드 레벨에 따라 해당 레벨에 관련된 레코드를 통해 계산해서 원한 값을 반환하여 데이터를 확인

**ex)** 연도별 주문건수 확인하기

<img width="380" alt="집계 계산 주문건수" src="https://github.com/user-attachments/assets/2f827173-25f9-49e1-8187-50a7fb52695a">


## 36. 테이블계산

<!-- 테이블 계산의 개념 및 사용 방법을 적어주세요. -->

`테이블 계산`: 뷰에 보이는 내용을 바탕으로 데이터가 계산됨.

<img width="602" alt="테이블 계산" src="https://github.com/user-attachments/assets/f39c3c82-01fb-4a98-86d9-efb08138927f">

```
기본 설정은 테이블(옆으로) 계산되지만, 변경 가능.
방법1. 해당 필드 마우스 우클릭->다음을 사용하여 계산에서 변경
방법2. 해당 필드 마우스 우클릭->테이블 계산 편집 옵션에서 변경
```

ex) 현재 달과 전월의 매출 차이 확인하기

**테이블 계산 매출 차이**

<img width="377" alt="테이블 계산 매출 차이" src="https://github.com/user-attachments/assets/839be129-429a-49d8-bbbd-15967b0fc483">

**테이블 계산 매출 차이 결과**

<img width="443" alt="테이블 계산 매출 차이 결과" src="https://github.com/user-attachments/assets/56b78b7b-a1a7-4edf-8ea1-cadd12048169">


## 37. 퀵테이블계산(1)

<!-- 퀵테이블 계산의 원리 및 예제에 대해 알게 된 점을 적어주세요. -->

`퀵 데이블 계산`: 테이블 계산에서 **자주 쓰이는** 테이블 계산 유형들을 클릭 만으로 가능하도록 만들어 놓은 기능
```
# 작동 방법
: 사용하고자 하는 필드 위에 마우스 우클릭->퀵 테이블 계산 선택
```
<계산 유형 알아보기>   
1)누계: 집계한 값을 누적한 값으로 한 번 더 집계해주는 계산 유형   
**ex1)** 분기별 **누적 매출**&매출 차트

<img width="797" alt="실습1" src="https://github.com/user-attachments/assets/47ec703f-ffc0-4b11-812c-80639349ec22">

2)차이: 측정값이 기준 값과 어느 정도 차이가 나는 지 구하는 계산 유형   
**ex2)** 각 제품에 대한 연도별 **매출 차이**

<img width="366" alt="실습2" src="https://github.com/user-attachments/assets/68ba4eab-c4b1-410a-83b1-acbb044575c6">

3)비율차이: 측정값들 사이의 성장률 또는 %차이를 표현   
**ex3)** 월별 **수익 차이**를 **%(퍼센트)**로 확인하기

<img width="800" alt="실습3" src="https://github.com/user-attachments/assets/049b80f5-41a9-4093-bf47-35a6783bc430">

4)구성비율: 전체에서 각 항목들의 비중을 확인할 때 사용   
**ex4)** 지역별 제품 매출 **순위**와 **구성비율**

<img width="451" alt="실습4" src="https://github.com/user-attachments/assets/c61d78ad-2fc6-4828-8c3c-624ca6a23d2e">

5)백분위수: 전체에서 각 멤버들의 백분위를 표시하도록 함   
**ex5)** 매출이 많은 고객과 적은 고객을 보고자 할 때 백분위로 표시하기

<img width="331" alt="실습5" src="https://github.com/user-attachments/assets/a49e5a08-d19e-49a5-96cb-8b9b11c7bedd">


## 38. 퀵테이블계산(2)

<!-- 이동평균, YTD 총계, 전년 대비 성장률, YTD 성장률 등 본 강의에서 알게 된 점을 적어주세요. -->

6)이동평균: 이전의 값부터 현재까지 값에 대한 평균을 낼 때 사용하며, 주식 데이터에서 많이 활용됨.

<img width="799" alt="실습6" src="https://github.com/user-attachments/assets/2c70d26e-277c-4cdb-88c1-032031781bf8">

7)YTD(Year to Date): 특정 시점을 기준으로 해당 연도부터 그 시점까지 총계
기본적으로 `누계`와 같은 개념이지만 '연도'보다 `하위레벨 필드`인 ‘분기’ 또는 ‘월’이 있어야 사용 가능.

<img width="434" alt="실습7" src="https://github.com/user-attachments/assets/34ed659a-dd06-4f6f-8e31-fa6e15164ed6">

8)통합 성장률(Compound Growth Rate)

<img width="426" alt="실습8" src="https://github.com/user-attachments/assets/afe7a1da-e39d-469f-954c-e2fc2a87847c">

9)전년 대비 성장률(Year Over Year Growth): 같은 월을 기준으로 이전 년도 대비 얼마 정도 성장했는지 살펴볼 때 활용됨.

<img width="430" alt="실습9" src="https://github.com/user-attachments/assets/e9d5c579-51ce-49ac-b9d2-d09c331e3388">

10)YTD Growth
```
#주의
: 퀵테이블 계산이 적용된 매출 필드를 더블 클릭하면 동작을 완료할 수 없다는 에러가 뜨는데, 그 이유는 "단일 계산식이 아니"기 때문이다.
이를 확인하기 위해 측정값 카드에 있는 ‘합계(매출) △’를 ctrl키를 누른 상태로 데이터 패널로 던지면, 임시 필드인 ‘계산1’과 ‘계산1 1’ 이렇게 2개의 필드가 생성되는데, 성장률 안에서는 총계가 숨어있기 때문이다.

계산1 -> YTD 총계, 계산1 1 -> YTD 성장률
```

<img width="432" alt="실습10" src="https://github.com/user-attachments/assets/063eaf43-9c1d-4f76-8eb8-04bfa5289a0e">



## 문제 1.

규석이는 이제껏 매출을 올리는 데에 힘썼었지만, 왠지 모르게 주머니에 들어오는 돈이 없어 속상합니다. 

그래서 매출이 상위 20곳에 속하지만, 수익률(%)이 마이너스인 시/도를 확인하려고 합니다.

> 수익률은 SUM([수익]) / SUM([매출])로 정의합니다.

어떤 집합을 만들었고, 어떤 결합을 하였는지를 중심으로 기술하고, 결과 자료를 첨부해주세요. 

(텍스트 표 형태이며, 색상으로 위 집합을 구분할 수 있게 만들어주세요.)

**<답변>**
시/도 필드에서 `매출 상위 20개`인 집합과 `수익률(%)이 마이너스`인 집합 2개를 생성한다.
교집합으로 결합된 집합을 만든다.

**결합 집합 만들기**

<img width="294" alt="문제1" src="https://github.com/user-attachments/assets/1c664cca-f569-4c36-9930-f63d96d2b9de">


<!-- 아래 예시 이미지를 삭제하고, 직접 만든 시트 사진을 올려주세요. 시트의 이름은 본인 이름으로 기입해주세요-->

**문제1 실습 결과**

<img width="872" alt="문제1 결과" src="https://github.com/user-attachments/assets/0bbbcd8d-564d-44ac-87e0-fa5ab8827d05">




## 문제 2.
선희는 주문 Id별로 주문에서 배송까지에 걸리는 날짜 일수가 궁금했습니다. 
그래서 주문 ID별로 주문에서 배송까지 걸리는 일자를 '배송까지 걸린 일수'라는 계산된 필드로 만들고, 이를 마크에 올린 후 확인해보았습니다. 
이때, 계산된 필드의 식은 'DATEDIFF' 함수를 이용하였습니다.

배송까지 걸린 일수 계산을 위한 DATEDIFF 함수 수식을 적어주세요.

```
DATEDIFF('day', [주문 날짜], [배송 날짜])
```

**함수 수식**

<img width="377" alt="문제2-1" src="https://github.com/user-attachments/assets/dc1be07b-dc88-4bcf-9ec3-509abd8dc78b">


그런데 위 그림처럼 '주문 날짜'와 '배송 날짜'를 함께 행에 올려 확인해보니, 주문날짜와 배송날짜의 차이가 '배송까지 걸린 일수'와 다릅니다.

ID-2021-11126을 보니, 11월 26일 배송에 11월 30일 배송이면 4일 차이인데, 12일이 걸렸다고 하네요. 왜 이런 문제가 생긴걸까요?

```
계산된 필드가 '측정값(합계)'로 계산되었기 때문이다.
```

그리고 이를 해결하기 위해서는 어떻게 해야 할까요?

```
'차원'으로 변경하여 사용해야 한다.
```

**문제2 실습 결과**

<img width="618" alt="문제2 결과" src="https://github.com/user-attachments/assets/5e5888dc-eed6-4eb4-9b0e-12c3f8f7c863">



## 문제 3.

다음은 Tableau의 다양한 계산을 사용할 수 있는 경우를 빈칸으로 두고 문제를 작성한 것입니다. 각 빈칸에 적합한 계산 유형을 채워보세요.

보기
> **누계, 차이, 비율 차이, 구성 비율, 순위, 백분위수, 이동 평균, YTD 총계, 통합 성장률, 전년 대비 성장률, YTD 성장률**

| 계산 유형               | 설명                                                                 | 사용 예시                                                                                          |
|-------------------------|----------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| 누계                                    | 데이터의 누적 합계를 계산                                             | 한 기업이 월별 매출 데이터를 누적하여 연간 매출 추이를 보고 싶을 때 사용                                      |
| 차이                                    | 연속 데이터 포인트 간의 차이를 계산                                    | 한 기업이 월별 매출 데이터에서 전월 대비 매출 증감량을 분석하고 싶은 경우                                        |
| 비율 차이                               | 연속 데이터 포인트 간의 비율 변화를 계산                               | 한 기업이 월별 매출 데이터에서 전월 대비 매출 증감률(%)을 분석하고 싶은 경우                                      |
| 구성 비율                               | 전체에서 각 데이터 포인트의 비율을 계산                                | 한 기업이 전체 매출에서 각 제품군이 차지하는 비율을 보고 싶을 때 사용                                           |
| 순위                                    | 데이터의 순위를 매깁니다                                              | 한 기업이 제품별 매출 데이터를 순위별로 정렬하여 상위 10개 제품을 분석하고 싶은 경우                              |
| 백분위수                                | 데이터의 백분위를 계산                                               | 한 기업이 고객별 구매 금액 데이터를 백분위수로 나누어 상위 25% 고객을 분석하고 싶은 경우                          |
| 이동 평균                               | 일정 기간의 평균을 계산                                               | 한 기업이 주간 매출 데이터에서 4주 이동 평균을 계산하여 트렌드를 분석하고 싶은 경우                              |
| YTD(Year to Date)                      | 연초부터 현재까지의 총계를 계산                                      | 한 기업이 월별 매출 데이터를 연초부터 현재까지 누적하여 연간 매출 목표 달성 여부를 분석하고 싶은 경우             |
| 통합 성장률(Compound Growth Rate)       | 일정 기간 동안의 연평균 성장률을 계산                                  | 한 기업이 5년 간 매출 데이터를 바탕으로 연평균 성장률(CAGR)을 계산하고 싶은 경우                                  |
| 전년 대비 성장률(Year Over Year Growth) | 전년 동기간 대비 성장률을 계산                                        | 한 기업이 월별 매출 데이터에서 전년 동월 대비 매출 성장률을 분석하고 싶은 경우                                    |
| YTD 성장률                             | 연초부터 현재까지의 성장률을 계산                                     | 한 기업이 올해 연초부터 현재까지의 매출이 전년 동기 대비 얼마나 성장했는지 분석하고 싶은 경우                     |

> 사용 예시를 참고하여 실제 경우처럼 생각하며 고민해보아요!
